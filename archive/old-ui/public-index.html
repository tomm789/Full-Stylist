<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Full Stylist</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <div id="login-view" class="login-container">
        <div class="login-card">
            <h1 class="site-title">Full Stylist</h1>
            <div class="login-form">
                <label>Name</label>
                <input type="text" id="login-name" placeholder="Enter your name">
                <label>Password</label>
                <input type="password" id="login-password" placeholder="Enter password">
                <button class="btn btn-primary" onclick="handleLogin()">Login</button>
            </div>
        </div>
    </div>

    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <div id="loading-text" style="color:white;">Processing...</div>
    </div>

    <div id="onboarding-view" class="onboarding-container hidden">
        
        <div id="step-1" class="step-card two-col">
            <h1 style="color: var(--primary); margin-top:0;">1. Create Headshot</h1>
            
            <div class="step-grid">
                <div class="step-left">
                    <div class="upload-box" onclick="document.getElementById('input-selfie').click()">
                        <div class="upload-text">Upload Selfie</div>
                        <img id="preview-selfie" class="hidden" alt="Selfie preview">
                        
                        <div id="loading-selfie-upload" class="image-loading-overlay">
                            <div class="spinner"></div>
                            <div class="loading-text">Generating...</div>
                        </div>

                        <input type="file" id="input-selfie" hidden accept="image/*" onchange="handleFile(this, 'preview-selfie', 'selfieBase64')">
                    </div>
                </div>

                <div class="step-right">
                    <div style="margin-bottom: 20px;">
                        <label>AI Model</label>
                        <select id="model-selector">
                            <option value="gemini-3-pro-image-preview">Pro üîí</option>
                            <option value="standard-plus">Standard Plus üîí</option>
                            <option value="gemini-2.5-flash-image" selected>Standard</option>
                        </select>
                        <div id="model-password-container" style="margin-top: 10px; display: none;">
                            <label>Password</label>
                            <input type="password" id="model-password" placeholder="Enter password" style="margin-bottom: 0;">
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <label>Hair Description</label>
                        <input type="text" id="setup-hair" placeholder="e.g. Buzz cut, blonde, messy texture...">
                        
                        <label>Make-up Description</label>
                        <input type="text" id="setup-makeup" placeholder="e.g. Natural look, red lipstick, clean skin...">
                    </div>

                    <button class="btn btn-primary" onclick="generateInitialHeadshot()">Generate Headshot</button>
                </div>
            </div>
        </div>

        <div id="step-2" class="step-card two-col hidden">
            <h1 style="color: var(--accent-purple);">Headshot Ready</h1>
            
            <div class="step-grid">
                <div class="step-left">
                    <div class="image-wrapper" onclick="openLightbox(document.getElementById('generated-headshot-preview').src)">
                        <img id="generated-headshot-preview" alt="Generated Headshot" style="width: 100%; border-radius:8px; border:1px solid #444; cursor: pointer;">
                        
                        <div id="loading-headshot" class="image-loading-overlay">
                            <div class="spinner"></div>
                            <div class="loading-text">Refining...</div>
                        </div>

                        <button class="download-btn" onclick="event.stopPropagation(); downloadImageById('generated-headshot-preview')" title="Download Image">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="step-right">
                    <div style="margin-bottom: 20px;">
                        <label>Refine Result</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="refine-headshot-desc" placeholder="e.g. Make my skin tone darker" style="flex: 1; margin-bottom: 0;">
                            <button class="btn btn-outline" style="width: auto;" onclick="refineHeadshot()">Refine</button>
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="goToStep(3)">Looks Good - Continue</button>
                    <button class="btn btn-outline" onclick="goToStep(1)">Try Again</button>
                </div>
            </div>
        </div>

        <div id="step-3" class="step-card two-col hidden">
            <h1 style="color: var(--primary);">2. Create Studio Model</h1>
            <p style="color:#888; font-size:0.9rem;">We will combine your new headshot with your body photo.</p>
            
            <div class="step-grid">
                <div class="step-left">
                    <div class="upload-box" onclick="document.getElementById('input-body').click()">
                        <div class="upload-text">Upload Full Body Photo</div>
                        <img id="preview-body" class="hidden" alt="Body preview">
                        
                        <div id="loading-body-upload" class="image-loading-overlay">
                            <div class="spinner"></div>
                            <div class="loading-text">Generating...</div>
                        </div>

                        <input type="file" id="input-body" hidden accept="image/*" onchange="handleFile(this, 'preview-body', 'bodyBase64')">
                    </div>
                </div>

                <div class="step-right">
                    <div style="padding-top: 20px;">
                        <button class="btn btn-primary" onclick="generateStudioModel()">Generate Studio Model</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-4" class="step-card two-col hidden">
            <h1 style="color: var(--accent-purple);">Studio Model Ready</h1>
            
            <div class="step-grid">
                <div class="step-left">
                    <div class="image-wrapper" onclick="openLightbox(document.getElementById('generated-body-preview').src)">
                        <img id="generated-body-preview" alt="Generated Studio Model" style="width: 100%; border-radius:8px; border:1px solid #444; cursor: pointer;">
                        
                        <div id="loading-body" class="image-loading-overlay">
                            <div class="spinner"></div>
                            <div class="loading-text">Refining...</div>
                        </div>

                        <button class="download-btn" onclick="event.stopPropagation(); downloadImageById('generated-body-preview')" title="Download Image">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="step-right">
                    <div style="margin-bottom: 20px;">
                        <label>Refine Result</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="refine-body-desc" placeholder="e.g. Adjust body height slightly" style="flex: 1; margin-bottom: 0;">
                            <button class="btn btn-outline" style="width: auto;" onclick="refineBodyModel()">Refine</button>
                        </div>
                    </div>

                    <button class="btn btn-primary" onclick="confirmStudioModel()">Looks Good - Continue</button>
                    <button class="btn btn-outline" onclick="goToStep(3)">Try Again</button>
                </div>
            </div>
        </div>

    </div>

    <div id="dashboard-view" class="app-layout hidden">
        
        <!-- Unified Header: Combines sidebar navigation with mobile app header -->
        <header class="unified-header">
            <!-- Row 1: Action buttons and weather (always visible) -->
            <div class="unified-header-row unified-header-row-1">
                <div class="unified-header-left">
                    <button class="nav-icon-btn" onclick="toggleDashboardMenu()" aria-label="Menu">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                    <button class="nav-icon-btn" onclick="openSearch()" aria-label="Search">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                    <button class="nav-icon-btn" onclick="openNotifications()" aria-label="Notifications">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </button>
                </div>
                <div class="unified-header-center">
                    <!-- Navigation icons - shown on desktop/tablet in row 1, mobile in row 2 -->
                    <div class="unified-nav-icons">
                        <div class="nav-item" id="nav-home" onclick="switchTab('home')" title="Home">üè†</div>
                        <div class="nav-item active" id="nav-stylist" onclick="switchTab('stylist')" title="Clothes Stylist">üëî</div>
                        <div class="nav-item" id="nav-wardrobe" onclick="switchTab('wardrobe')" title="Wardrobe">üëï</div>
                        <div class="nav-item" id="nav-outfits" onclick="switchTab('outfits')" title="Outfits">üëó</div>
                        <div class="nav-item" id="nav-salon" onclick="switchTab('salon')" title="Hair & Make-up">üíá‚Äç‚ôÄÔ∏è</div>
                    </div>
                </div>
                <div class="unified-header-right">
                    <div class="weather-display">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
                            <path d="M22 10a3 3 0 0 0-3-3h-2.5"></path>
                        </svg>
                        <span>16¬∞ 22¬∞</span>
                    </div>
                </div>
            </div>
            <!-- Row 2: Navigation icons (mobile browser only) -->
            <div class="unified-header-row unified-header-row-2">
                <div class="unified-nav-icons">
                    <div class="nav-item" id="nav-home-mobile" onclick="switchTab('home')" title="Home">üè†</div>
                    <div class="nav-item active" id="nav-stylist-mobile" onclick="switchTab('stylist')" title="Clothes Stylist">üëî</div>
                    <div class="nav-item" id="nav-wardrobe-mobile" onclick="switchTab('wardrobe')" title="Wardrobe">üëï</div>
                    <div class="nav-item" id="nav-outfits-mobile" onclick="switchTab('outfits')" title="Outfits">üëó</div>
                    <div class="nav-item" id="nav-salon-mobile" onclick="switchTab('salon')" title="Hair & Make-up">üíá‚Äç‚ôÄÔ∏è</div>
                </div>
            </div>
        </header>

        <main class="stage-area">
            
            <div id="history-slider" class="history-slider-container hidden">
                <div style="color: #666; font-size: 0.8rem; margin-right: 10px; white-space:nowrap;">Generated<br>Outfits</div>
                <div id="history-track" style="display:flex; gap:10px;">
                    </div>
            </div>

            <div id="top-session-controls" class="session-controls top-controls hidden">
                <button class="btn btn-outline" onclick="undoGeneration()">Undo</button>
                <button class="btn btn-outline" onclick="duplicateCurrentOutfit()">Duplicate</button>
                <button class="btn btn-outline" onclick="resetSession()">New Outfit</button>
                <button id="save-outfit-btn" class="btn btn-primary" onclick="saveCurrentOutfit()" style="display: none;">Save Outfit</button>
            </div>

            <!-- Wardrobe Workspace Grid (Moved from sidebar) -->
            <div id="wardrobe-workspace-container" class="hidden" style="width: 100%; height: 100%; position: relative; padding: 12px; display: flex; flex-direction: column; gap: 10px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="color: var(--primary); margin: 0;">Workspace</h2>
                    <button id="clear-workspace-btn" class="btn btn-outline btn-small" onclick="clearWorkspace()" style="display: none; width: auto; margin: 0;">Clear Workspace</button>
                </div>
                
                <button id="generate-outfit-btn" class="btn btn-primary" onclick="generateMannequinOutfit()" style="display: none; width: 100%; margin: 0; padding: 15px; font-size: 1.1rem; box-shadow: 0 4px 15px rgba(195, 236, 82, 0.2);">
                    Generate Mannequin Outfit
                </button>

                <div id="wardrobe-workspace-grid" style="flex: 1; position: relative; width: 100%; border: 2px dashed var(--surface-light); border-radius: 12px; background: var(--surface-dark); overflow: hidden;">
                    <!-- Workspace items will be positioned here -->
                </div>
            </div>

            <div id="stage-image-container" class="image-wrapper" onclick="openLightbox(document.getElementById('stage-image').src)">
                <img id="stage-image" src="" style="cursor: pointer;">
                
                <div id="loading-stage" class="image-loading-overlay">
                    <div class="spinner"></div>
                    <div class="loading-text">Styling...</div>
                </div>

                <button class="download-btn" onclick="event.stopPropagation(); downloadCurrentImage()" title="Download Image">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </button>
            </div>
            
            <div id="stage-label" style="position: absolute; bottom: 20px; background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; color: #ccc;">
                Studio View
            </div>

            <!-- Mannequin Overlay -->
            <div id="mannequin-overlay" class="mannequin-overlay hidden">
                <div class="mannequin-overlay-content">
                    <img id="mannequin-preview" alt="Mannequin Preview">
                    <div class="mannequin-actions">
                        <button class="btn btn-primary" onclick="approveMannequin()">Accept Outfit</button>
                        <button class="btn btn-outline" onclick="closeMannequinOverlay()">Reject</button>
                    </div>
                </div>
            </div>
        </main>

        <aside class="controls-panel">
            
            <div id="tab-stylist" class="control-section active">
                <!-- Landing State -->
                <div id="stylist-landing" class="landing-state hidden">
                    <h2>create your first look to start styling</h2>
                    <button class="btn btn-primary" onclick="startOnboarding()">start now</button>
                </div>
                <!-- Functional UI -->
                <div id="stylist-ui" class="panel-content">
                    <h3 style="color: var(--primary); margin-top:0;">Virtual Stylist</h3>

                    <label>Hair & Make-up (Select Face)</label>
                    <div id="headshot-grid" class="grid-3">
                        </div>

                    <hr style="border:0; border-top:1px solid #333; margin: 20px 0;">

                    <label>Wardrobe (Select Multiple)</label>
                    <input type="file" id="wardrobe-upload" hidden multiple accept="image/*" onchange="handleWardrobeUpload(this)">
                    <div id="wardrobe-grid" class="grid-3"></div>

                    <div style="margin-top: 15px;">
                        <label>Description</label>
                        <textarea id="clothing-desc" rows="2" placeholder="eg. yellow converse hi-tops and a rolex watch"></textarea>
                    </div>

                    <button class="btn btn-primary" onclick="generateOutfit()">Generate Outfit</button>
                </div>
            </div>

            <div id="tab-wardrobe" class="control-section">
                <div class="panel-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 style="color: var(--primary); margin-top:0;">Wardrobe</h3>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-outline" style="width: auto; padding: 8px 15px; margin-top: 0;" onclick="openStyleMe()">Style Me</button>
                            <button class="btn btn-primary" style="width: auto; padding: 8px 20px; margin-top: 0;" onclick="handleNewItemUpload()">New Item</button>
                        </div>
                    </div>
                    <input type="file" id="wardrobe-new-item-upload" hidden multiple accept="image/*" onchange="handleWardrobeUpload(this)">
                    
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="wardrobe-search" placeholder="Search wardrobe..." oninput="searchWardrobe(this.value)" style="margin-bottom: 0;">
                    </div>
                    
                    <div class="wardrobe-filters">
                        <div class="user-filters" style="margin-bottom: 10px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <label>Settings & Groups</label>
                                <div style="display: flex; gap: 5px;">
                                    <button class="btn btn-outline btn-small" onclick="openCategoryManager()">Categories</button>
                                    <button class="btn btn-outline btn-small" onclick="openGroupManager()">Groups</button>
                                    <button class="btn btn-outline btn-small" onclick="openWeatherSettings()">Weather</button>
                                </div>
                            </div>
                            <div id="wardrobe-group-tabs" class="horizontal-tabs small">
                                <div class="tab active" onclick="filterWardrobeGroup('All')">All Groups</div>
                                <!-- Groups will be added here dynamically -->
                            </div>
                        </div>

                        <div class="view-toggle" style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                            <button id="toggle-list-view" class="btn btn-outline active" onclick="setWardrobeView('list')">Horizontal</button>
                            <button id="toggle-grid-view" class="btn btn-outline" onclick="setWardrobeView('grid')">Grid</button>
                            <button class="btn btn-outline" style="width: auto; margin-top: 0;" onclick="sortByColor()">Sort by Color</button>
                            <button id="toggle-bulk-select" class="btn btn-outline" style="width: auto; margin-top: 0;" onclick="toggleBulkSelectMode()">Select Multiple</button>
                        </div>
                        <div id="bulk-actions-toolbar" class="bulk-actions-toolbar hidden" style="margin-top: 10px; padding: 10px; background: var(--surface-light); border-radius: 8px; display: flex; gap: 10px; align-items: center;">
                            <span style="color: var(--text-muted); font-size: 0.9rem;"><span id="bulk-selected-count">0</span> selected</span>
                            <button class="btn btn-outline btn-small" onclick="bulkChangeCategory()">Change Category</button>
                            <button class="btn btn-outline btn-small" onclick="bulkChangeGroup()">Move to Group</button>
                            <button class="btn btn-outline btn-small" style="color: var(--danger); border-color: var(--danger);" onclick="bulkDelete()">Delete</button>
                            <button class="btn btn-outline btn-small" onclick="exitBulkSelectMode()">Cancel</button>
                        </div>
                    </div>

                    <div class="wardrobe-tabs-container">
                        <div id="wardrobe-category-tabs" class="horizontal-tabs">
                            <div class="tab active" onclick="filterWardrobe('All')">All</div>
                            <div class="tab" onclick="filterWardrobe('Tops')">Tops</div>
                            <div class="tab" onclick="filterWardrobe('Bottoms')">Bottoms</div>
                            <div class="tab" onclick="filterWardrobe('Shoes')">Shoes</div>
                            <div class="tab" onclick="filterWardrobe('Accessories')">Accessories</div>
                        </div>
                    </div>

                    <div id="wardrobe-items-container">
                        <!-- Category sections will be rendered here -->
                    </div>
                </div>
            </div>

            <div id="tab-outfits" class="control-section">
                <div class="panel-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 style="color: var(--primary); margin-top:0;">Outfits</h3>
                        <button class="btn btn-outline" style="width: auto; padding: 8px 15px; margin-top: 0;" onclick="openStyleMe()">Style Me</button>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="outfits-search" placeholder="Search outfits..." oninput="searchOutfits(this.value)" style="margin-bottom: 0;">
                    </div>
                    
                    <div class="outfit-tabs">
                        <div class="horizontal-tabs">
                            <div class="tab active" onclick="setOutfitSubTab('all')">All Outfits</div>
                            <div class="tab" onclick="setOutfitSubTab('lookbooks')">Lookbooks</div>
                            <div class="tab" onclick="setOutfitSubTab('calendar')">Calendar</div>
                        </div>
                    </div>

                    <div id="outfit-all-content">
                        <div id="recent-outfits-section">
                            <label>Recent Outfits</label>
                            <div id="recent-outfits-slider" class="horizontal-slider"></div>
                        </div>

                        <div class="outfit-filters" style="margin: 20px 0;">
                            <label>Filter & Categories</label>
                            <div id="outfit-categories" class="horizontal-tabs small">
                                <div class="tab active" onclick="filterOutfits('All')">All</div>
                                <!-- Categories will be added here dynamically -->
                            </div>
                        </div>

                        <div id="all-outfits-grid" class="grid-2"></div>
                    </div>

                    <div id="outfit-lookbooks-content" class="hidden">
                        <div style="margin-bottom: 20px;">
                            <button class="btn btn-primary" style="width: auto; margin-top: 0;" onclick="createNewLookbook()">Create Lookbook</button>
                        </div>
                        <div id="lookbooks-grid" class="grid-2">
                            <!-- Lookbooks will be rendered here -->
                        </div>
                    </div>
                    
                    <div id="outfit-calendar-content" class="hidden">
                        <div style="margin-bottom: 20px;">
                            <button class="btn btn-outline" style="width: auto; margin-top: 0;" onclick="navigateCalendarMonth(-1)">‚Üê Prev</button>
                            <span id="calendar-month-year" style="margin: 0 15px; color: var(--text-main);"></span>
                            <button class="btn btn-outline" style="width: auto; margin-top: 0;" onclick="navigateCalendarMonth(1)">Next ‚Üí</button>
                        </div>
                        <div id="outfit-calendar" class="outfit-calendar">
                            <!-- Calendar will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-salon" class="control-section">
                <!-- Landing State -->
                <div id="salon-landing" class="landing-state hidden">
                    <h2>create your first look to start styling</h2>
                    <button class="btn btn-purple" onclick="startOnboarding()">start now</button>
                </div>
                <!-- Functional UI -->
                <div id="salon-ui" class="panel-content">
                    <h3 style="color: var(--accent-purple); margin-top:0;">Virtual Salon</h3>
                    <p style="font-size:0.8rem; color:#888;">Generates a new headshot. Save it to use in the Stylist tab.</p>

                    <label>Hair Description</label>
                    <input type="text" id="salon-hair" placeholder="e.g. Platinum blonde bob...">
                    
                    <label>Make-up Description</label>
                    <input type="text" id="salon-makeup" placeholder="e.g. Heavy eyeliner, nude look...">

                    <button class="btn btn-purple" onclick="generateNewHeadshot()">Generate New Look</button>
                    <button class="btn btn-outline" onclick="saveCurrentHeadshot()">Save to Profile</button>
                </div>
            </div>

        </aside>
    </div>

    <!-- Home Page View -->
    <div id="home-view" class="home-view hidden">
        <!-- Top Navigation Bar -->
        <nav class="home-top-nav">
            <button class="nav-icon-btn" onclick="toggleHomeMenu()" aria-label="Menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
            <button class="nav-icon-btn" onclick="openNotifications()" aria-label="Notifications">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
            </button>
            <button class="nav-icon-btn" onclick="openSearch()" aria-label="Search">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
            </button>
            <div class="weather-display">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
                    <path d="M22 10a3 3 0 0 0-3-3h-2.5"></path>
                </svg>
                <span>16¬∞ 22¬∞</span>
            </div>
        </nav>

        <!-- Date and Outfit Navigation Section -->
        <div class="home-date-section">
            <h2 class="home-date-heading">Planner</h2>
            <div class="home-date-controls">
                <button class="home-date-nav-btn" onclick="navigateDate(-1)" aria-label="Previous day">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                </button>
                <button class="home-date-picker" onclick="openDatePicker()">
                    <span>20/2/2026</span>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                </button>
                <button class="home-date-nav-btn" onclick="navigateDate(1)" aria-label="Next day">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Calendar Dropdown -->
        <div id="calendar-dropdown" class="calendar-dropdown hidden">
            <div class="calendar-dropdown-content">
                <div class="calendar-dropdown-header">
                    <button class="calendar-nav-btn" onclick="navigateCalendarMonth(-1)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <h3 class="calendar-month-year" id="calendar-dropdown-month-year"></h3>
                    <button class="calendar-nav-btn" onclick="navigateCalendarMonth(1)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>
                <div class="calendar-dropdown-grid" id="calendar-dropdown-grid">
                    <!-- Calendar grid will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Day Cards Container -->
        <div class="home-days-container" id="home-days-container">
            <!-- Day cards will be rendered here -->
        </div>

        <!-- New Button -->
        <button class="home-new-btn" onclick="createNew()">
            <span>New</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </button>

        <!-- Banner Ad Area -->
        <div class="home-banner">
            <p>Banner Ad Here?</p>
        </div>

        <!-- Bottom Navigation Bar -->
        <nav class="home-bottom-nav">
            <button class="home-nav-item active" onclick="switchHomeTab('home')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                    <path d="M2 17l10 5 10-5"></path>
                    <path d="M2 12l10 5 10-5"></path>
                </svg>
                <span>Home</span>
            </button>
            <button class="home-nav-item" onclick="switchHomeTab('wardrobe')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                    <path d="M2 17l10 5 10-5"></path>
                    <path d="M2 12l10 5 10-5"></path>
                </svg>
                <span>Wardrobe</span>
            </button>
            <button class="home-nav-item" onclick="switchHomeTab('outfits')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                    <path d="M2 17l10 5 10-5"></path>
                    <path d="M2 12l10 5 10-5"></path>
                </svg>
                <span>Outfits</span>
            </button>
            <button class="home-nav-item" onclick="switchHomeTab('lookbooks')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                    <path d="M2 17l10 5 10-5"></path>
                    <path d="M2 12l10 5 10-5"></path>
                </svg>
                <span>Lookbooks</span>
            </button>
            <button class="home-nav-item" onclick="switchHomeTab('stylist')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                    <path d="M2 17l10 5 10-5"></path>
                    <path d="M2 12l10 5 10-5"></path>
                </svg>
                <span>Stylist</span>
            </button>
        </nav>
    </div>

    <!-- Lightbox -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <div class="lightbox-content" onclick="event.stopPropagation()">
            <button class="lightbox-close" onclick="closeLightbox()" title="Close">√ó</button>
            <img id="lightbox-image" class="lightbox-image" src="" alt="Full screen image">
            <button class="lightbox-download" onclick="downloadLightboxImage()" title="Download Image">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
            </button>
        </div>
    </div>

    <!-- Wardrobe Item Modal -->
    <div id="wardrobe-modal" class="modal" onclick="closeWardrobeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeWardrobeModal()">√ó</button>
            <div id="wardrobe-modal-body" class="wardrobe-modal-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <!-- Outfit Viewer Modal -->
    <div id="outfit-modal" class="modal full-screen" onclick="closeOutfitModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-back" onclick="closeOutfitModal()">‚Üê Back</button>
            <div id="outfit-modal-body" class="outfit-modal-body">
                <!-- Content injected via JS -->
            </div>
            <div id="outfit-modal-slider" class="modal-slider">
                <!-- Prev/Next outfits slider -->
            </div>
        </div>
    </div>

    <!-- Category Management Modal -->
    <div id="category-manager-modal" class="modal" onclick="closeCategoryManager()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeCategoryManager()">√ó</button>
            <div class="modal-header">
                <h2>Manage Categories</h2>
            </div>
            <div id="category-manager-body" class="category-manager-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <!-- Group Management Modal -->
    <div id="group-manager-modal" class="modal" onclick="closeGroupManager()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeGroupManager()">√ó</button>
            <div class="modal-header">
                <h2>Manage Groups</h2>
            </div>
            <div id="group-manager-body" class="group-manager-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <!-- Style Me Assistant Modal -->
    <div id="style-me-modal" class="modal" onclick="closeStyleMe()">
        <div class="modal-content" style="max-width: 600px;" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeStyleMe()">√ó</button>
            <div class="modal-header">
                <h2>Style Me Assistant</h2>
            </div>
            <div id="style-me-body" class="style-me-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <!-- Weather Settings Modal -->
    <div id="weather-settings-modal" class="modal" onclick="closeWeatherSettings()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeWeatherSettings()">√ó</button>
            <div class="modal-header">
                <h2>Weather Settings</h2>
            </div>
            <div id="weather-settings-body" class="weather-settings-body">
                <!-- Content injected via JS -->
            </div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>

